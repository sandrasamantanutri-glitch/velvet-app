<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Perfil Premium | Plataforma</title>
    <link rel="stylesheet" href="profile.css">
</head>

<body>

<!-- CAPA -->
<div class="cover-container">
    <img id="profileCover" class="profile-cover">
</div>

<!-- AVATAR + NOME -->
<section class="profile-header">
    <img id="profileAvatar" class="avatar-large">
    <h1 id="profileName" class="profile-name"></h1>

    <!-- BOTÕES -->
    <div class="profile-buttons">
        <button id="editBioBtn" class="btn-edit">Editar Bio</button>
        <button onclick="location.href='chat.html'">Enviar Mensagem</button>
        <button id="btnAssinar" class="btn-roxa">ASSINAR</button>
    </div>

    <!-- BIO -->
    <p id="profileBio" class="profile-bio"></p>
</section>

<hr class="separator">

<!-- UPLOAD -->
<section class="upload-section">
    <label class="upload-label">
        + Enviar Foto/Vídeo
        <input id="uploadMidia" type="file" accept="image/*,video/*">
    </label>
</section>

<!-- GALERIA -->
<section id="gallery" class="gallery-grid">
    <!-- Miniaturas carregam aqui -->
</section>

  <!-- MENU SUPERIOR -->
   <div id="creatorPanel" class="creator-panel">
    <div class="panel-header">
        <span>Menu</span>
        <button id="closeMenuBtn" class="close-btn">×</button>
    </div>

    <div class="panel-menu">
        <button onclick="location.href='profile.html'">Meu Perfil</button>
        <button onclick="location.href='conteudos.html'">Conteúdos</button>
        <button onclick="location.href='chat.html'">Mensagens</button>
        <button onclick="location.href='config.html'">Configurações</button>
    </div>
</div>

<div class="profile-menu-top">
    <button id="openMenuBtn" class="menu-btn">☰</button>
</div>
<script src="./profile.js"></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
    const openBtn  = document.getElementById("openMenuBtn");
    const closeBtn = document.getElementById("closeMenuBtn");
    const panel    = document.getElementById("creatorPanel");

    console.log("Botão encontrado?", openBtn);
    console.log("Painel encontrado?", panel);

    if (openBtn && panel) {
        openBtn.addEventListener("click", () => {
            panel.classList.add("show");
        });
    }

    if (closeBtn && panel) {
        closeBtn.addEventListener("click", () => {
            panel.classList.remove("show");
        });
    }
});
    document.getElementById("btnAssinar").addEventListener("click", async () => {
        const clientName = localStorage.getItem("clientName");
        const creatorName = localStorage.getItem("creatorName");

        const resp = await fetch("/assinar", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ clientName, creatorName })
        });

        const json = await resp.json();

        if (json.ok) {
            alert("Assinatura realizada!");
            window.location.href = "chatclient.html";
        }
    });
</script>
</body>
</html>